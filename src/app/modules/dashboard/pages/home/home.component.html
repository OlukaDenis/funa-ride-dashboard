<div class="dashboard-container">
    <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2">
        <ng-container *ngFor="let item of items; let i = index">
            <app-dash-card [title]="item.title" [content]="isLoading ? '' : item.content" [class.shimmer]="isLoading">
            </app-dash-card>
        </ng-container>
    </div>


    <div class="flex flex-col rounded-lg bg-background p-8 mt-8">
        <div class="grid grid-cols-2 gap-3 mt-4">
            <div>
                <div class="p-5">
                    <h3 class="mb-2 text-muted-foreground/80">Trips Summary</h3>
                    <select class="select select-bordered bg-background" id="tripYearPicker"
                        [(ngModel)]="selectedTripYear" (ngModelChange)="onTripYearChange($event)">
                        <option disabled selected>Select Year</option>
                        <option *ngFor="let year of years" [value]="year">{{ year }}</option>
                    </select>
                </div>

                <div class="py-5" *ngIf="loadingTrips">
                    <app-loading></app-loading>
                </div>

                <div *ngIf="!loadingTrips">
                    <div *ngIf="monthlyData.length > 0; else noDataTemplate" class="p-5">
                        <apx-chart [series]="chartOptions.series" [chart]="chartOptions.chart"
                            [xaxis]="chartOptions.xaxis">
                        </apx-chart>
                    </div>
                    <ng-template #noDataTemplate>
                        <div class="p-5">
                            <div class="flex flex-col rounded-lg bg-background p-8">
                                <app-empty-list-component></app-empty-list-component>
                            </div>
                        </div>
                    </ng-template>
                </div>
            </div>

            <div>
                <div class="p-5">
                    <h3 class="mb-2 text-muted-foreground/80">Users Summary</h3>
                    <select class="select select-bordered bg-background" id="tripYearPicker"
                        [(ngModel)]="selectedUserYear" (ngModelChange)="onUserYearChange($event)">
                        <option disabled selected>Select Year</option>
                        <option *ngFor="let year of years" [value]="year">{{ year }}</option>
                    </select>
                </div>

                <div class="py-5" *ngIf="loadingUsers">
                    <app-loading></app-loading>
                </div>

                <div *ngIf="!loadingUsers">
                    <div *ngIf="userData.length > 0; else noDataTemplate" class="p-5">
                        <apx-chart [series]="userChartOptions.series" [chart]="userChartOptions.chart"
                            [xaxis]="userChartOptions.xaxis"></apx-chart>
                    </div>

                    <ng-template #noDataTemplate>
                        <div class="p-5">
                            <div class="flex flex-col rounded-lg bg-background p-8">
                                <app-empty-list-component></app-empty-list-component>
                            </div>
                        </div>
                    </ng-template>
                </div>
            </div>

            <div>
                <div class="p-5">
                    <h3 class="mb-2 text-muted-foreground/80">Drivers Summary</h3>
                    <select class="select select-bordered bg-background" id="tripYearPicker"
                        [(ngModel)]="selectedDriverYear" (ngModelChange)="onDriverYearChange($event)">
                        <option disabled selected>Select Year</option>
                        <option *ngFor="let year of years" [value]="year">{{ year }}</option>
                    </select>
                </div>

                <div class="py-5" *ngIf="loadingDrivers">
                    <app-loading></app-loading>
                </div>

                <div *ngIf="!loadingDrivers">
                    <div *ngIf="driverData.length > 0; else noDataTemplate" class="p-5">
                        <apx-chart [series]="driverChartOptions.series" [chart]="driverChartOptions.chart"
                            [xaxis]="driverChartOptions.xaxis"></apx-chart>
                    </div>
                    <ng-template #noDataTemplate>
                        <div class="p-5">
                            <div class="flex flex-col rounded-lg bg-background p-8">
                                <app-empty-list-component></app-empty-list-component>
                            </div>
                        </div>
                    </ng-template>
                </div>
            </div>


        </div>
    </div>